<script>
const messages = document.getElementById("messages");
const input = document.getElementById("input");

function mesajEkle(tur, metin) {
  const div = document.createElement("div");
  div.className = "msg " + tur;
  div.innerHTML = (tur === "user" ? "Sen: " : "Aptal: ") + metin;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
}

function sacmaSiir() {
  const a = ["Bir sabah uyandım","Pencere açıktı","Saat bana baktı"];
  const b = ["çünkü simitler düşünüyordu","mantık izin almıştı","kediler konuşuyordu"];
  const c = ["sonra sustuk.","kimse anlamadı.","hayat devam etti."];
  return a[Math.random()*a.length|0] + "<br>" +
         b[Math.random()*b.length|0] + "<br>" +
         c[Math.random()*c.length|0];
}

function cevapUret(text) {
  text = text.toLowerCase();

  if (
    text.includes("şiir yaz") ||
    text.includes("bir şiir yaz")
  ) {
    return sacmaSiir();
  }

  return "Bu soruyu düşündüm ama düşünürken başka şeye daldım.";
}

input.onkeydown = function(e) {
  if (e.key === "Enter" && input.value.trim() !== "") {
    const text = input.value;
    input.value = "";
    mesajEkle("user", text);

    setTimeout(() => {
      const reply = cevapUret(text);
      mesajEkle("bot", reply);
    }, 300);
  }
};
</script>
